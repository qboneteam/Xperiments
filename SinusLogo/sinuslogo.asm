	device zxspectrum128

	org	#6000

	db 4,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3
	db 4,5,5,6,7,7,7,7,7,7,7,6,6,5,4,4
	db 4,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3
	db 4,5,5,6,7,7,7,7,7,7,7,6,6,5,4,4
	db 4,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3
	db 4,5,5,6,7,7,7,7,7,7,7,6,6,5,4,4
	db 4,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3
	db 4,5,5,6,7,7,7,7,7,7,7,6,6,5,4,4
	db 4,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3
	db 4,5,5,6,7,7,7,7,7,7,7,6,6,5,4,4
	db 4,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3
	db 4,5,5,6,7,7,7,7,7,7,7,6,6,5,4,4
	db 4,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3
	db 4,5,5,6,7,7,7,7,7,7,7,6,6,5,4,4
	db 4,3,2,1,1,0,0,0,0,0,0,0,1,2,2,3
	db 4,5,5,6,7,7,7,7,7,7,7,6,6,5,4,4

SnaStart:
	ei

	ld hl,#5800
	ld de,#5801
	ld bc,#0300
	ld (hl),l
	ldir

	ld hl,#5900
	ld de,#5901
	ld bc,#001f
	ld (hl),%01000011
	ldir

	ld hl,#5900 + #20*6
	ld de,#5901 + #20*6
	ld bc,#001f
	ld (hl),%01000011
	ldir


	ld de,#5920
	ld hl,logo
	ld b,5*4
.ss0:
	ld c,8
.ss2:
	xor a
	rlc (hl)
	jr nc,.ss1
	xor %01000101
.ss1:
	ld (de),a
	inc e
	dec c
	jr nz,.ss2
	inc hl
	djnz .ss0



theLOOP:
	xor	a
	out	(#fe),a
	halt
	inc a
	out (#fe),a
	call risovach
	jr	theLOOP

risovach:
	call .ris0
	ld a,(.r0+1)
	inc a
	and 31
	ld (.r0+1),a
.ris0:
	ld c,%00000000
.r0:
	ld hl,#6000
	ld e,0
.l0:
	ld a,#48
	add (hl)
	ld d,a
	ld a,c
	ld (de),a
	inc l
	inc e
	jr nz,.l0
	ld a,(.ris0+1)
	xor %01111110
	ld (.ris0+1),a
	ret

;logo:
	db	%00000000,%01000000,%00000000,%00000000
	db	%11111000,%01111101,%11110111,%11011111
	db	%10001000,%01000101,%00010100,%01010001
	db	%10001011,%01000101,%00010100,%01011111
	db	%10001000,%01000101,%00010100,%01010000
	db	%11111000,%01111101,%11110100,%01011111
	db	%00001000,%00000000,%00000000,%00000000

logo:
	db %11101100,%11101110,%11001110,%11101100
	db %10101010,%10001010,%10100100,%00101110
	db %10101100,%10001110,%10100100,%01001110
	db %10101010,%10101010,%10100100,%10001110
	db %11101010,%11101010,%10101110,%11101110





	savesna "sinuslogo.sna",SnaStart